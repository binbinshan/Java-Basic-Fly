

## 简述 Java 的 happen before 原则

在java中编译器、指令器可能会为了提高性能，对代码进行重排序，而happen before原则主要是避免胡乱的进行重排，重排序必须符合happen befor规则。

happen befor八大规则：
* 程序顺序规则：写在前面的操作先行发生于后面的操作。
* 锁定规则：一个unlock操作必须先于对后面同一锁的lock操作。
* volatile变量规则：对一个volatile变量的写操作先行发生于后面对这个volatile变量的读操作。
* 传递规则：如果操作A先行发生于操作B，而操作B又先行发生于操作C，则可以得出操作A先行发生于操作C。
* 线程启动规则：Thread对象的start()方法先行发生于此线程的每个一个动作。
* 线程中断规则：对线程interrupt()方法的调用先行发生于被中断线程的代码检测到中断事件的发生。
* 线程终结规则：线程中所有的操作都先行发生于线程的终止检测。
* 对象终结规则：一个对象的初始化完成先行发生于他的finalize()方法的开始。

所有的重排序，如果符合上面的情况，就必须按规则保证指令顺序，如果属于上述情况，即可进行重排。

