# 什么是TCP粘包和拆包？
1. 发送方写入的数据大于套接字缓冲区大小，此时将发生拆包。
2. 发送方写入的数据小于套接字缓冲区大小，由于TCP默认使用Nagle算法，当发送收集了很多小的分组，就会一起发送给对端，此时会发生粘包。
3. 进行MSS(最大报文长度)大小的TCP分段，当TCP报文的数据部分大于MSS的时候会发生拆包。
4. 发送方发送速度太快了，接收方处理速度赶不上发送端的速度，就会发生粘包。

### 解决方案
1. 在消息头部添加消息长度，服务器端获取消息头的时候解析消息长度，然后向后读取相应的长度数据。
2. 固定消息的长度，每次服务端都读取指定长度的消息作为一条完整的消息，如果消息不够长，就补固定字符，会浪费资源。
3. 设置分隔符，服务器从数据流中按照分隔符分离出消息内容，一般使用换行符。

### 什么时候要处理粘包？
当接收端同时收到多个分组，并且这些分组毫无关系，就需要处理粘包。
